<style type="text/css">
    .currUser {
        color: #FA6D6C;
    }
    input[type = "checkbox"] {
        margin-top: -2px;
    }
    .ry_form{
    	 min-width: 100%;
    }
    .center-font16{
        font-size: 16px;
        padding-top: 5px !important;
    }
    .tit_2{
    	min-width: 80%;
    }
    .modal-title>span{
    	color:red;
    }

     .entrust_pub{
         display: table-cell;
         vertical-align: middle;
         text-align: center;
         /*border: 1px solid black;*/
     }
    *[isRequired="req"]::-webkit-input-placeholder { /* WebKit browsers */

        color: red;

    }
    *[isRequired="req"]:-moz-placeholder { /* Mozilla Firefox 4 to 18 */

        color: red;

    }

    *[isRequired="req"]::-moz-placeholder { /* Mozilla Firefox 19+ */

        color: red;

    }

    *[isRequired="req"]:-ms-input-placeholder { /* Internet Explorer 10+ */

        color: red;

    }
    td>textarea{
        border: none;
    }
    .tblGw01 .td04{
        color: #F50000;
    }
</style>

<input hidden id="asDocId" ng-model="task.proInstId"/>
<input hidden id="userId" ng-model="currentUser.username"/>
 <div class="container-full" style="background:#909090">
     <!--cc-->
    <div class="row" style="margin: 0">
        <div class="col-md-2"  style="height:100%;width: 13%;padding: 0;padding: 0;" >
            <div ui-view="leftMenu"></div>
        </div>
        <div class="col-md-8" style="height:100%;overflow:auto;padding-top:9px;width: 74%" ng-show="fc.wpsDetail.middleContentType=='form'" >
            <!--<div ui-view="middleForm" id="middelForm" style="background:white; width: 680px; margin-left: auto;margin-right: auto;padding: 0 2% 5% 2%; margin-top: 330px; transform:scale(1.7,1.7);box-shadow: 5px 2px 5px #575757" ></div>-->
            <!--<div ui-view="middleForm" id="middelForm" style="background:white; width: 680px; margin-left: auto;margin-right: auto; margin-bottom: 97px; padding: 0 2% 5% 2%; margin-top: 92px; transform:scale(1.2,1.2);box-shadow: 5px 2px 5px #575757" ></div>-->
            <div ui-view="middleForm" id="middelForm" style="background:white; width: 680px; margin-left: auto;margin-right: auto; margin-bottom: 10px; padding: 0 2% 5% 2%; margin-top: 88px; transform:scale(1.2,1.2);box-shadow: 5px 2px 5px #575757" ></div>
        </div>
        <div class="col-md-8 wpsContent" style="height:100%;padding: 0;width: 74%;" ng-show="fc.wpsDetail.middleContentType=='wps'">
			<div id="wpsContent" style="background:#808080; width: 100%; height:100%; margin-left: auto;margin-right: auto;" ></div>
		</div>
		<div class="col-md-8 wpsContent" style="height:100%;padding: 0;width: 74%" ng-show="fc.wpsDetail.middleContentType=='ofd'">
			<div  id="objectdiv" style="background:#808080; width: 100%; height:100%; margin-left: auto;margin-right: auto;" ></div>
		</div>
        <div class="col-md-2" ui-view="rightMenu"  style="height:100%;width: 13%;padding-left: 0"></div>
    </div>
</div>
<!-- <div style="background:#909090">
        
        <div ui-view="leftMenu" style="height:100%" >
        <div class="gw_cont" style="background:gray;height:100%;overflow:auto;padding-top:9px" ng-show="fc.wpsDetail.middleContentType=='form'">
        	<div ui-view="middleForm" style="background:white; width: 680px; margin-left: auto;margin-right: auto;padding: 0 2% 5% 2%;box-shadow: 5px 2px 5px #575757" ></div>
        </div>
        <div class="gw_cont wpsContent" style="background:gray;height:100%;padding-top:2px" ng-show="fc.wpsDetail.middleContentType=='wps'">
        	<div id="wpsContent" style="background:#808080; width: 900px; height:100%; margin-left: auto;margin-right: auto;"></div>
        </div>
        <div class="gw_cont wpsContent" style="background:gray;height:100%;padding-top:2px" ng-show="fc.wpsDetail.middleContentType=='ofd'">
        	<div id="objectdiv" style="background:#808080; width: 900px; height:100%; margin-left: auto;margin-right: auto;"></div>
        </div>
        <div ui-view="rightMenu"  style="height:100%"></div>
</div> -->

<div ng-include="'apps/workflow/modalDialogs.html'"></div>


<div class="modal fade bs-example-modal-lg" id="uploadAttach" tabindex="-1" role="dialog">
	<iframe frameborder=0 scrolling=no style="background-color:transparent; position: absolute; z-index: -1; width: 100%; height: 100%; top:0;left:0;"></iframe>
    <div class="modal-dialog modal-lg" style="width: 50%" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">上传文件 <span>{{attUploadInfo.opinion}}</span></h4>
            </div>
            <div class="modal-body">
            	<form class="form-horizontal">
	            	<!--<div class="form-group">
	            		<label for="name" class="col-sm-2 control-label">附件说明</label>
						<div class="col-sm-10">
							 <textarea class="form-control" rows="3" ng-model="attUploadInfo.annexDescription"></textarea>
						</div>
					</div>
	            	<div class="form-group">
	            		<div class="col-sm-5">
	                    	<input type="file" ng-file-model="fc.headPortrait">
	                	</div>
						<div class="col-sm-7">
							 <a ng-click="fc.fileUpload()" class="btn btn-primary btn-xs">上传文件</a>
						</div>
					</div>-->
                    <div ng-show="fujianBtn =='banci'" class="form-group col-md-12">
                        <label for="title" class="col-sm-2 center-font16 control-label">附件说明*：</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="title" ng-model="attUploadInfo.annexDescription" placeholder="修改版次需填写相应说明" />
                        </div>
                    </div>
                    <div class="form-group col-md-12">
                        <label for="title" class="col-sm-2 center-font16 control-label">附件上传*：</label>
                        <div class="col-sm-10">
                            <div class="input-group">
                                <input id="lefile" type="file" style="display:none" ng-file-model="fc.headPortrait">
                                <span class="input-group-btn">
                                    <button class="btn btn-default" style="margin-right: 0px" onclick="$('input[id=lefile]').click();" type="button"><i class="fa fa-folder-open"></i>浏览</button>
                                </span>
                                <input type="text" value="{{fc.headPortrait.name}}" readonly class="form-control">
                                <span class="input-group-btn">
                                    <button ng-click="fc.headPortraitCheck() || fc.fileUpload()" ng-disabled="fc.headPortraitCheck()" class="btn btn-default btn-primary" type="button">上传文件</button>
                                    <button ng-click="fc.addWpsContent()" class="btn btn-default btn-primary" style="margin-right: 0px" type="button">新建文件</button>
                                </span>
                            </div>
                        </div>
                    </div>
                </form>
                <div class="table_1 clearfix" ng-if="fc.attachList.length>0" style="height: 450px;overflow-y: auto;display: inline-block">
                    <table class="table table-striped  table_zdy_2">
                        <thead>
                        <tr>
                            <th width="5%">序号</th>
                            <th width="30%">文件名</th>
                            <th width="8%">版本</th>
                            <th width="10%">姓名</th>
                            <th width="10%">上传时间</th>
                            <th width="6%">操作ip</th>
                            <th width="10%">附件说明</th>
                            <th width="10%">操作</th>
                        </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="att in fc.attachList">
                                <td>{{$index + 1}}</td>
                                <td><a href="" ng-click="fc.openDocumentText(att)" data-dismiss="modal">{{att.attachment.filename}}</a></td>
                                <td>1.{{att.largeVersion===null?0:att.largeVersion}}.{{att.minorVersion===null?0:att.minorVersion}}</td>
                                <td>{{att.creatorName}}</td>
                                <td>{{att.attachment.createTime | date:"yyyy-MM-dd HH:mm:ss"}}</td>
                                <td>{{att.ip}}</td>
                                <td>{{att.annexDescription}}</td>
                                <td>
                                    <a ng-href="{{ENV.localapi}}/attach/downloadWps?id={{att.attachment.id}}" style="margin: 0" class="btn btn-primary btn-xs"  >下载</a>
                                    <!--<a href="" ng-show="fc.isShowDownloud(att)" class="btn btn-danger btn-xs" ng-click="enclosureAction('delete',att)" ng-repeat="a in att.actionDefList">删除</a>-->
                                </td>
                            </tr>
                        </tbody>
                        <!--<tfoot>
                        	<tr>
                        		<td colspan="7">
                        			<a data-dismiss="modal" class="btn btn-primary btn-xs">关闭</a>
                        		</td>
                        	</tr>
                        </tfoot>-->
                    </table>
                </div>
            </div>
            <!--<div class="modal-footer mf">
                <button type="button" class="btn btn-sm btn-primary save" ng-click="queryProInstListChangeBean('sjlwDw')">确定</button>
                <button type="button" class="btn btn-sm btn-default save" data-dismiss="modal">关闭</button>
            </div>-->
        </div>
    </div>
</div>

<div class="modal fade" id="saveDocDialog" tabindex="-1" role="dialog" aria-hidden="true">
	<iframe frameborder=0 scrolling=no style="background-color:transparent; position: absolute; z-index: -1; width: 100%; height: 100%; top:0;left:0;"></iframe>
    <div class="modal-dialog">
        <div class="modal-content" style="width:700px">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h3 class="modal-title" id="myModalLabel">保存文件名</h3>
            </div>
            <div class="modal-body" style="height:100px">
                <div class="form-group">
                    <div class="input-group">
                        <input type="text" required class="form-control" id="exampleInputAmount" ng-model="fc.beforeExt" placeholder="请输入文件名,不含后缀">
                        <div class="input-group-addon">{{fc.behindExt}}</div>
                    </div>
                    <!--<input class="form-control input-md" placeholder="请输入文件名" ng-model="fc.currentGroupOwnerAttach.attachment.filename" type="text"/>-->
                </div>
                <div class="form-group" style="text-align: center">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                    <button type="button" class="btn btn-primary"  ng-disabled="fc.beforeExtCheck()"  ng-click="fc.beforeExtCheck() || fc.saveDoc()">确定</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade bs-example-modal-lg" id="instanceNumber" tabindex="-1" role="dialog" aria-hidden="true">
	<iframe frameborder=0 scrolling=no style="background-color:transparent; position: absolute; z-index: -1; width: 100%; height: 100%; top:0;left:0;"></iframe>
    <div class="modal-dialog modal-lg">
        <div class="modal-content" >
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h3 class="modal-title" id="myModalLabel">请填写主送份数</h3>
            </div>
            <div class="modal-body" >
                <div class="bmxx_tit" id="depart_tit">
                    <div class="left"><img src="images/bmxx_tit-01.png">
                        <span >
                      		   份号登记
                          </span>
                    </div>
                    <div class="right user-titleheading" style="width: 70%">
                        <div class="form-group" style="margin-bottom: 0px;">
                            <a href=""  class="tj" style="margin-left: 5px" ng-click="addInstanceNumber()" ><img src="images/add.svg">新增</a>
                        </div>
                    </div>
                </div>
                <div class="table_1" id="table_1">
                               <table class="table table-striped  table_zdy_2" style="margin-bottom: 0;">
                                   <thead>
                                    <tr>
                                        <th width="10%">单位</th>
                                        <th width="10%">起始份号</th>
                                        <th width="10%">结束份号</th>
                                        <th width="5%">合计</th>
                                        <th width="5%">操作</th>
                                    </tr>
                                   </thead>
                                   <tr ng-repeat="num in task.belongingProInst.wfInstanceNumberList">
                                       <td>
                                           <div class="form-group">
                                               <input class="form-control input-md" placeholder="请输入单位名称" ng-model="num.unitName" type="text"/>
                                           </div>
                                       </td>
                                       <td>
                                       	<div class="form-group">
						                    <input class="form-control input-md" placeholder="请输入起始份号" ng-model="num.startNumber" type="number"/>
						                </div>
                                       </td>
                                       <td>
                                       	<div class="form-group">
						                    <input class="form-control input-md" placeholder="请输入结束份号" ng-model="num.endNumber" ng-blur="fc.componentsNum(num)" type="number"/>
						                </div>
                                       </td>
                                       <td>{{num.total}}</td>
                                       <td><a href="" class="btn btn-danger" ng-click="deleteCurrentRow($index)">删除</a></td>
                                   </tr>
                               </table>
                           </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary" ng-click="fc.saveInstanceNumber()">确定</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="printCtlInfo" tabindex="-1" role="dialog" aria-hidden="true">
	<div class="modal-dialog" >
		<div class="modal-content" style="width:700px">
			<div class="modal-header">
                <!--<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>-->
				<!--<div >-->

                <div style="display: table">
                    打印控制：共{{printCtlInfoObj.ofdPrintCount}}份，剩余未打印{{printCtlInfoObj.ofdPrintCount - printCtlInfoObj.ofdPrintedNums.length}}份，本次打印
                    <div class="entrust_pub">
                        <input  id="printControlNumId" type="number"  ng-change="printControlNumBlur()"
                                ng-model="printControlNum" style="text-align: center;width: 50px;padding: 0"  placeholder="">
                    </div>
                    份
                </div>
				<!--</div>-->

			</div>
			<div class="modal-body" style="height:500px">
				<div class="row" style="height:100%">
		            <div class="col-md-4" style="height:100%;overflow:auto" >
				 	    <div class="alert alert-info">&nbsp;已打印：{{printCtlInfoObj.ofdPrintedNums.length}} 份</div>
                        <div style="height:400px;overflow-y: scroll;overflow-x: hidden">
				 	    <div class="ry_form"  ng-repeat="ofdPrintedNum in printCtlInfoObj.ofdPrintedNums" >
		                   <div class="tit_2 clearfix" style="width:160px">
		                       <span class="l" style="width:100%">{{ofdPrintedNum}}</span>
		                       <i class="r"></i>
		                   </div>
			            </div>
                        </div>
				 	</div>

				 	<div class="col-md-4" style="height:100%;overflow:auto">
				 		<div class="alert alert-info">&nbsp;本次已选：{{printCtlInfoObj.ofdPrintNums.length}} 份</div>
                        <div style="height:400px;overflow-y: scroll;overflow-x: hidden">
				 	    <div class="ry_form"  ng-repeat="ofdPrintNum in printCtlInfoObj.ofdPrintNums track by $index" ng-click="moveArrayItem(printCtlInfoObj.ofdPrintNums,printCtlInfoObj.ofdWaitPrintNums,ofdPrintNum)">
		                   <div class="tit_2 clearfix" style="width:160px;cursor: pointer">
		                       <span class="l" style="width:100%"> {{ofdPrintNum}}</span>
		                       <i class="r"></i>
		                   </div>
			            </div>
                        </div>
					</div>
                    <div class="col-md-4" >
                        <div class="alert alert-info">&nbsp;剩余可选：{{printCtlInfoObj.ofdWaitPrintNums.length}} 份</div>

                        <div style="height:400px;overflow-y: scroll;overflow-x: hidden">
                            <div class="ry_form"  ng-repeat="ofdWaitPrintNum in printCtlInfoObj.ofdWaitPrintNums" ng-click="moveArrayItem(printCtlInfoObj.ofdWaitPrintNums,printCtlInfoObj.ofdPrintNums,ofdWaitPrintNum)">
                                <div class="tit_2 clearfix" style="width:160px;cursor: pointer">
                                    <span class="l" style="width:100%">{{ofdWaitPrintNum}}</span>
                                    <i class="r"></i>
                                </div>
                            </div>

                        </div>
                    </div>
				</div>
     	 	</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
				<button type="button" class="btn btn-primary" ng-disabled ="printCtlInfoObj.ofdPrintNums.length < 1" ng-click="ofdPrintConfirm()">确定</button>
			</div>
		</div>
	</div>
</div>

<div class="modal fade bs-example-modal-lg" id="printNumber" tabindex="-1" role="dialog" aria-hidden="true">
	<iframe frameborder=0 scrolling=no style="background-color:transparent; position: absolute; z-index: -1; width: 100%; height: 100%; top:0;left:0;"></iframe>
    <div class="modal-dialog modal-lg">
        <div class="modal-content" >
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h3 class="modal-title" id="myModalLabel">请选择打印份号</h3>
            </div>
            <div class="modal-body" >
                <div class="table_1" id="table_1">
                               <table class="table table-striped  table_zdy_2" style="margin-bottom: 0;">
                                   <thead>
                                    <tr>
                                        <th width="5%"><input type="checkbox" ng-model="n.isPrint" ng-true-value="1" ng-false-value="0" ng-disabled="n.isPrint==='1'" ></th>
                                        <th width="95%">份号</th>
                                    </tr>
                                   </thead>
                                   <tr ng-repeat="pr in fc.printNumberList">
                                       <td><input type="checkbox" ng-model="n.isPrint" ng-true-value="1" ng-false-value="0" ></td>
                                       <td>
	                                       	<div class="checkbox-inline">
							                    <label class="checkbox-inline" ng-repeat="n in pr">
												  <input type="checkbox" ng-model="n.isPrint" ng-true-value="1" ng-false-value="0" ng-disabled="n.isPrint==='1'" > {{n.partNumber}}=={{n.isPrint}}
												</label>
							                </div>

                                       </td>
                                   </tr>
                               </table>
                           </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary" ng-click="fc.savePringtNumber()">确定</button>
                <!-- <button type="button" class="btn btn-primary" ng-click="fc.quietPrintFile()">打印</button> -->
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="relatedReceiveDocIdDialog" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">已关联文号</h4>
            </div>
            <div class="modal-body">
                <div class="table_shadow" style="overflow:auto; ">
                    <table class="table table-striped  table_zdy_2" style="min-width:100%;">
                        <thead>
                            <tr>
                                <th style="white-space: pre-wrap" width="60%">文        号</th>
                                <th width="20%">状态</th>
                                <th width="20%">操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="task in fc.currentTask.relateShouWenExits">
                                <td>{{::task.docFullName}}</td>
                                <td>存在</td>
                                <td><button type="button" class="btn btn-sm btn-primary" style="margin-right: 5px;" ng-click="fc.docHisview(task)">查看</button></td>
                            </tr>
                            <tr ng-repeat="task in fc.currentTask.relateShouWenNotExits">
                                <td>{{::task.docFullName}}</td>
                                <td colspan="2">失效</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- 选择需要套红的附件 -->
<div class="modal fade bs-example-modal-lg" id="selectRedAttachment" tabindex="-1" role="dialog" aria-labelledby="selectRedAttachment">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalCreatDepartment">选择需要套红的附件</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                	<div class="col-md-6">
                		<div class="box box-warning ">  <!-- direct-chat direct-chat-warning -->
	                		<div class="box-header with-border">
	                			<h3 class="box-title">附件列表</h3>
	                		</div>
	                		<div class="box-body">
	                			<div class="ry_form" ng-repeat="a in fc.selectRedAttachList.unselected" ng-click="fc.addOrDeleteSelectRed(a.id,'unselected','selected')">
	                				<div class="tit_2 clearfix" >
				                       <span class="l" style="width:100%">{{a.attachment.filename}}</span>
				                   </div>
	                			</div>
	                		</div>
                		</div>
                	</div>
                	<div class="col-md-6">
                		<div class="box box-danger">
                			<div class="box-header with-border">
	                			<h3 class="box-title">已选列表</h3>
	                		</div>
	                		<div class="box-body">
	                			<div class="ry_form" ng-repeat="a in fc.selectRedAttachList.selected" ng-click="fc.addOrDeleteSelectRed(a.id,'selected','unselected')">
	                				<div class="tit_2 clearfix">
				                       <span class="l" style="width:100%">{{a.attachment.filename}}</span>
				                       <i class="r"></i>
				                   </div>
	                			</div>
	                		</div>
                		</div>
                	</div>
                </div>
            </div>
            <div class="modal-footer mf">
            	<button type="button" class="btn btn-primary btn-sm save" ng-click="fc.openWithRedTemplate()">确定</button>
                <button type="button" class="btn btn-default btn-sm cancel" data-dismiss="modal">关闭</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade bs-example-modal-lg" id="domainDialog" tabindex="-1" role="dialog" aria-labelledby="myModalDomainDialog">
    <iframe frameborder=0 scrolling=no style="background-color:transparent; position: absolute; z-index: -1; width: 100%; height: 100%; top:0;left:0;"></iframe>
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <!--<button type="button" class="close"  aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>-->
                <h4 class="modal-title" id="myModalDomainDialog">填写公文域相关信息</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" id="addDomainForm" name="angularForm"  novalidate="novalidate" ng-submit="saveDomain()">
                    <!-- role="form" name="angularForm" id="angularForm" role="form" novalidate ng-submit="maxManagementBud()" -->
                    <div class="form-group" ng-repeat="(x, y) in fc.notDomain">
                        <label for="{{x}}" class="col-sm-2 control-label">{{x}}</label>
                        <div class="col-sm-10">
                            <input type="text" id="{{x}}" class="form-control"  ng-model="fc.notDomain[x]"  placeholder="请填写{{x}}" required="required">
                        </div>
                    </div>
                    <div class="form-group" style="text-align: center">
                        <button type="button" class="btn btn-default btn-close cancel" ng-click="closeDomainDialog('domainDialog')">关闭</button>
                        <button type="submit" class="btn btn-primary btn-enter save" >保存</button>
                    </div>
                </form>
            </div>

        </div>
    </div>
</div>